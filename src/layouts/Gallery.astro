---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const { frontmatter } = Astro.props;
const { title, subtitle, description, absPhotoFolder, items } = frontmatter

const images = import.meta.glob<{ default: ImageMetadata; }>(
  '/src/**/*.{jpeg,jpg,png,gif}'
)
---

<html lang="en">
	<BaseHead title={title} description={description} />

	<body>
		<Header />
    <main class="container mx-auto my-16">

      <section class="text-3xl m-8
        grid grid-cols-1 gap-x-4 gap-y-24 items-start
        xl:grid-cols-2"
      >
        <section>
          <h1>{title}</h1>
          { subtitle && <p class="subtitle">{subtitle}</p> }
        </section>
          <section>
            <slot />
          </section>
      </section>

      <section>
        <section
          class="gallery m-8 mt-24 gap-4 columns-1 md:columns-2 lg:columns-3"
        >
          { items.map( ({ src = "", alt = "" }) =>
              <Image
                class="gallery-item mb-4"
                src={images[absPhotoFolder + src]()}
                alt={alt}
              />
            )
          }
        </section>
      </section>
    </main>
		<Footer />
	</body>
</html>


